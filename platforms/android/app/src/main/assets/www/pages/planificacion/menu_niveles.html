<template>
    <div class="page">
        <div class="ap_fondo_2">
            <div class="row">
                <div class="col text-align-center" style="margin-top:52px;">
                    <i class="f7-icons ap_img_item">graph_round</i>
                </div>
            </div>
        </div>         

        <div class="navbar">
            <div class="navbar-inner sliding">
                <div class="left">
                    <a href="#" class="link back">
                        <i class="f7-icons">arrow_left</i>
                        <!--<span class="ios-only">Atras</span>-->
                    </a>
                </div>
                <div class="title center"> <a href="/" class="link"><img src="images/logos/logo-h.png" class="ap_logo-h"></a> </div>
            </div>
        </div>

        <div class="page-content" style="padding:10px;padding-top:150px;">
            <div class="card">
                <div class="card-content card-content-padding">
                    <h1 id="titleNiveles" class="text-align-center h1" style="color:#383838;margin: 0px !important;">Niveles</h1>
                </div>
            </div>

            <div class="block">
                <div class="card" style="margin-top:40px;">
                    <div class="card-content card-content-padding">
                        <div class="list">
                            <ul id="divMenuPlanificacionNiveles">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>
<script>
    return { 
        on: { pageInit: function(e, page) { loadMenu(page.route.params.idc); } }
    }

    function loadMenu(ID){
        if(ID == 1){ $("#titleNiveles").html("Menores"); }
        if(ID == 2){ $("#titleNiveles").html("Adultos"); }

        var API_USER = localStorage.getItem("LS_USER_API_KEY");
        var HTML = "";
        $.ajax({
            type: "GET",
            headers: {"Authorization": API_USER},
            url: URL_SERVER+"planificacion/"+ID+"/0",
            dataType: 'json',
            success: function (data){
                $.each(data.PLANIFICACION, function(index, item) {
                    HTML += "<li>";
                    HTML += "<a href=\"/MAIN-TRIMESTRES/"+ item.id +"/1/\" data-view=\".view-main\" class=\"item-link item-content\" onclick=\"localStorage.setItem('LS_TXT_NIVEL', '"+ item.titulo +"');\">";                              
                    HTML += "<div class=\"item-media\"><i class=\"f7-icons\">collection</i></div>";
                    HTML += "<div class=\"item-inner\">";
                    HTML += "<div class=\"item-title\">"+ item.titulo +"</div>";
                    // HTML += "<div class=\"item-after\"> <span class=\"badge\">"+ item.total +" ejercicios</span> </div>";
                    HTML += "</div>";
                    HTML += "</a>";
                    HTML += "</li>";
                });   
                
                $("#divMenuPlanificacionNiveles").html(HTML);
            }
        });                  
    }
</script>